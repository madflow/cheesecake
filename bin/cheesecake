#!/usr/bin/env php

<?php

if (PHP_SAPI !== 'cli') {
    echo 'Warning: Cheesecake should be invoked via the CLI version of PHP, not the '.PHP_SAPI.' SAPI'.PHP_EOL;
}

ini_set('error_reporting', E_ALL);

require_once __DIR__ . '/../vendor/autoload.php';

$doc = <<<DOC

Cheesecake

Usage:
  cheesecake    TEMPLATE
  cheesecake    [-fDn] [-o OUTPUTDIR] TEMPLATE
  cheesecake    [-fDn] [-r REPLACEMENTS] [-o OUTPUTDIR] TEMPLATE
  cheesecake    (-h | --help)
  cheesecake    (-v | --version)
  cheesecake    [-r REPLACEMENTS] [-o OUTPUTDIR] TEMPLATE

Options:
    -o --output          The output directory. Defaults to '.'
    -f --force           Force
    -D --debug           Debug
    -n --no-interaction  No interaction
    -h --help
    -v --version
    -r --replacements    Add replacements
    
DOC;

$args = Docopt::handle($doc, array('version'=>'Cheesecake 0.1'));
$gen = new Cheesecake\Generator($args['TEMPLATE'], [], $args->args);
$gen->run();
