#!/usr/bin/env php

<?php

if (PHP_SAPI !== 'cli') {
    echo 'Warning: Cheesecake should be invoked via the CLI version of PHP, not the '.PHP_SAPI.' SAPI'.PHP_EOL;
}

ini_set('error_reporting', E_ALL);

require_once __DIR__ . '/../vendor/autoload.php';

$doc = <<<DOC
Cheesecake

Usage:
  cheesecake    TEMPLATE
  cheesecake    [-o OUTPUTDIR] [-fD] [-c BRANCH] TEMPLATE
  cheesecake    (-h | --help)
  cheesecake    (-v | --version)

Options:
    -f --force      Overwrite the contents of the output directory if it already exists
    -o --output     The output directory. Defaults to '.'
    -c, --checkout  branch, tag or commit id to checkout after git clone
    -D, --debug     Print debug information
    -h --help
    -v --version

DOC;

$args = Docopt::handle($doc, array('version'=>'Cheesecake 0.1'));
$gen = new Cheesecake\Generator($args['TEMPLATE'], [], $args['OUTPUTDIR']);
$gen->run();
